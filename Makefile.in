#DEBUG = -g -DDEBUG
VERSION = -DVERSION=\"0.1\"

CC = @CC@
PREFIX = @prefix@
LIBDIR = @prefix@/lib

DEFINES = -DHAVE_CONFIG_H ${VERSION}
CFLAGS = -Wall @CFLAGS@ ${DEBUG} ${DEFINES}

SOURCES = __stack_chk_fail_local.c
OBJS = __stack_chk_fail_local.o

all: libssp_noshared.a

libssp_noshared.o: $(SOURCES)
	$(CC) $(CFLAGS) -c -o $@ $^ $(LDFLAGS)

libssp_noshared.a: $(OBJS)
	ar r $@ $<

.PHONY: clean clean-all install
clean:
	rm -f *.o libssp_noshared.a

clean-all:
	rm -f libssp_noshared.a *.o configure config.* Makefile
	rm -rf autom4te.cache

install:
	install -o root -g root -m 0444 -s libssp_noshared.a $(DESTDIR)$(LIBDIR)


